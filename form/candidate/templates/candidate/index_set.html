<!DOCTYPE html>
<html lang="ru-RU">
  <head>
    {% load staticfiles %}
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="favicon.ico">

    <title>Анкета кандидата</title>
    <script type="text/javascript" src="{% static 'candidate/js/jquery.js' %}"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/jquery.validate.js"></script>

    <link href="{% static 'candidate/css/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'candidate/css/bootstrap-datetimepicker.min.css' %}" rel="stylesheet">

    <link href="{% static 'candidate/css/form.css' %}" rel="stylesheet">

    <script type="text/javascript" src="{% static 'candidate/js/bootstrap-datetimepicker.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'candidate/js/bootstrap-datetimepicker.ru.js' %}"></script>



    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->


    <script>


      function addBlock(source, destination, forms_counter, init_forms){

          var currentcount = parseInt($(forms_counter).val());
          var block = $(source).clone();

          block.find("*").each(function(){
              var current_id = $(this).attr("id");
              var current_for = $(this).attr("for");
              var current_name = $(this).attr("name");

              if (current_id) {
                $(this).attr("id",  current_id.replace("0", currentcount));
                $(this).val("");
              }

              if (current_for) {
                $(this).attr("for", current_for.replace("0", currentcount));
              }

              if (current_name) {
                $(this).attr("name", current_name.replace("0", currentcount));
              }

          });

          $(forms_counter).val(currentcount+1);
          $(init_forms).val(currentcount+1);
          $(destination).append(block);

          link_start = $(block).find('input[id*=start_date]').attr('id');
          link_end = $(block).find('input[id*=end_date]').attr('id');

          if ($(block).attr('id')=="education_block"){
            $(block).find('input[id*=edu_start]').datetimepicker({
              format: "MM yyyy",
              weekStart: 1,
              startView: 4,
              minView: 3,
              language: "ru",
              autoclose: true,
              linkField: link_start,
              linkFormat: "dd.mm.yyyy"
             });
            $(block).find('input[id*=edu_end]').datetimepicker({
              format: "MM yyyy",
              weekStart: 1,
              startView: 4,
              minView: 3,
              language: "ru",
              autoclose: true,
              linkField: link_end,
              linkFormat: "dd.mm.yyyy"
             });
          }
          if ($(block).attr('id')=="exp_block"){
            $(block).find('input[id*=exp_start]').datetimepicker({
              format: "MM yyyy",
              weekStart: 1,
              startView: 4,
              minView: 3,
              language: "ru",
              autoclose: true,
              linkField: link_start,
              linkFormat: "dd.mm.yyyy"
             });
            $(block).find('input[id*=exp_end]').datetimepicker({
              format: "MM yyyy",
              weekStart: 1,
              startView: 4,
              minView: 3,
              language: "ru",
              autoclose: true,
              linkField: link_end,
              linkFormat: "dd.mm.yyyy"
             });
          }
      }


      function addDateTimePicker(){
        link_edu_start = "id_education-0-start_date";
        link_edu_end = "id_education-0-end_date";
        $("#edu_start_0").datetimepicker({
          format: "MM yyyy",
          weekStart: 1,
          startView: 4,
          minView: 3,
          language: "ru",
          autoclose: true,
          linkField: link_edu_start,
          linkFormat: "dd.mm.yyyy"
         });
        $("#edu_end_0").datetimepicker({
          format: "MM yyyy",
          weekStart: 1,
          startView: 4,
          minView: 3,
          language: "ru",
          autoclose: true,
          linkField: link_edu_end,
          linkFormat: "dd.mm.yyyy"
         });
        link_exp_start = "id_expirience-0-exp_start_date";
        link_exp_end = "id_expirience-0-exp_end_date";
        $("#exp_start_0").datetimepicker({
          format: "MM yyyy",
          weekStart: 1,
          startView: 4,
          minView: 3,
          language: "ru",
          autoclose: true,
          linkField: link_exp_start,
          linkFormat: "dd.mm.yyyy"
         });
        $("#exp_end_0").datetimepicker({
          format: "MM yyyy",
          weekStart: 1,
          startView: 4,
          minView: 3,
          language: "ru",
          autoclose: true,
          linkField: link_exp_end,
          linkFormat: "dd.mm.yyyy"
         });
      }



      $(document).ready(function(){

          $("#addr").hide();


          $("#hide").click(function(){
              $("#addr").hide(500);
          });

          $("#show").click(function(){
              $("#addr").show(500);
              $("#addr").focus();
          });


          $('#id_passp_date').datetimepicker({
            format: "dd.mm.yyyy",
            weekStart: 1,
            startView: 4,
            minView: 2,
            language: "ru",
            autoclose: true,
            startDate: "-70y",
            endDate: new Date(),
          });
          $('#id_passp_date').prop('readonly', true);

          $('#id_start').datetimepicker({
            format: "dd.mm.yyyy",
            weekStart: 1,
            startView: 2,
            minView: 2,
            language: "ru",
            autoclose: true,
            startDate: new Date()
          });
          $('#id_start').prop('readonly', true);

          $('#id_birthday').datetimepicker({
            format: "dd.mm.yyyy",
            weekStart: 1,
            startView: 4,
            minView: 2,
            language: "ru",
            autoclose: true,
            startDate: "-80y",
            endDate: "-14y",
          });
          $('#id_birthday').prop('readonly', true);


          addDateTimePicker();
          $('input[name*=start_date], input[name*=end_date]').prop('readonly', true);


          $("#add_education").click(function() {
            addBlock("#education_block", "#education_div", "#id_education-TOTAL_FORMS", "#id_education-INITIAL_FORMS");
            $('input[name*=start_date], input[name*=end_date]').prop('readonly', true);
          });



          $("#add_exp").click(function() {
            addBlock("#exp_block", "#exp_div", "#id_expirience-TOTAL_FORMS", "#id_expirience-INITIAL_FORMS");
            $('input[name*=start_date], input[name*=end_date]').prop('readonly', true);
          });



          <!--$("#sub_button").click(function(e){-->
            <!--&lt;!&ndash;e.preventDefault();&ndash;&gt;-->
            <!--var validator = $("#mainForm").validate();-->
            <!--if (validator){-->
              <!--$.ajax({type: "GET", url: "/form-0/check",-->
                <!--success: function (data, text) {-->
                  <!--console.log(text, '###', data);-->
                  <!--console.log(this);-->
                  <!--console.log(e);-->
                  <!--$("#mainForm").submit();-->
                  <!--return false;-->
                <!--},-->
                <!--error: function (request, status, error) {-->
                  <!--console.log(error, request);-->
                  <!--alert('Не связи с сервером');-->
                <!--}-->
              <!--});-->
            <!--}-->
          <!--});-->


          <!--$("#mainForm").submit(function(e){-->
            <!--e.preventDefault();-->
            <!--var validator = $("#mainForm").validate();-->
            <!--if (validator){-->
              <!--$.ajax({type: "GET", url: "/form-0/check",-->
                <!--success: function (data, text) {-->
                  <!--console.log(text, '###', data);-->
                  <!--console.log(this);-->
                  <!--console.log(e);-->
                  <!--$(this).submit();-->
                <!--},-->
                <!--error: function (request, status, error) {-->
                  <!--console.log(error, request);-->
                  <!--alert('Не связи с сервером');-->
                <!--}-->
              <!--});-->
            <!--}-->
          <!--});-->
      });
    </script>
  </head>
<body style="padding-bottom:400px;">

  <div class="page-header">
        <h1 class="text-center">Анкета кандидата</h1>
  </div>

<div class="col-sm-offset-3 col-sm-6 col-sm-offset-3" style="margin-bottom: 100px">
  <div class="alert alert-warning">
    <p><strong>Внимание!</strong> Все пункты обязательны для заполнения.</p>
    <p>Мы не гарантируем Вам трудоустройство, но Ваша анкета будет храниться в
      нашем кадровом банке, и мы обязательно свяжемся с Вами, если увидим в Вас
       потенциального кандидата на конкретную вакансию.
    </p>
  </div>

<div class="row">

  {% load bootstrap3 %}

</div>
  <form name="form1" action="{% url 'candidate:index' mail_group=form.mail_to_group.value %}" method="post" autocomplete="off" id="mainForm">
     {% csrf_token %}
      {{ form.mail_to_group }}
                <div class="panel panel-primary">
                  <div class="panel-heading">Личные данные</div>
                  <div class="panel-body">
                    {% bootstrap_field form.position %}
                    {% bootstrap_field form.full_name %}
                    <div class="row">
                    <div class="col-sm-5">
                      {% bootstrap_field form.birthday %}
                    </div>

                      <div class="col-sm-4">
                      {% bootstrap_field form.gender %}
                      </div>

                    </div>
                  </div>
                </div>

                <div class="panel panel-primary">
                  <div class="panel-heading">Адреса</div>
                  <div class="panel-body">
                    {% bootstrap_field form.registration %}
                    <label class="control-label" for="show">Адрес проживания</label>
                    как в прописке?
                    <div class="form-group">
                      <label><input type="radio" name="resid" id="hide" checked> Да</label>
                      <label><input type="radio" name="resid" id="show"> Нет</label>
                    </div>
                    <textarea name="residence" class="form-control" id="addr" placeholder="Адрес проживания" rows="10"></textarea>
                  </div>
                </div>

                <div class="panel panel-primary">
                  <div class="panel-heading">Контакты</div>
                  <div class="panel-body">
                    {% bootstrap_field form.phone %}
                  </div>
                </div>

                <div class="panel panel-primary">
                  <div class="panel-heading">Семья</div>
                  <div class="panel-body">
                    {% bootstrap_field form.civil_status %}
                    <div id="quant_children">
                      {% bootstrap_field form.quant_children %}
                    </div>
                  </div>
                </div>


                <div class="panel panel-primary">
                  <div class="panel-heading">Паспорт</div>
                  <div class="panel-body">
                    {% bootstrap_field form.passp_number %}
                    {% bootstrap_field form.passp_issue %}
                    {% bootstrap_field form.passp_date %}
                  </div>
                </div>


                <div class="panel panel-primary">
                  <div class="panel-heading">Образование и специальность</div>
                  <div class="panel-body">
                    <div class="alert alert-warning">
                      Укажите учебные заведения, курсы, семинары, стажировки, которые Вы окончили
                    </div>
                    <div id="education_div">
                      {{ edu_formset.management_form }}
                        {% for form in edu_formset %}
                          {% if forloop.first %}
                            <fieldset id="education_block">
                              <div class="form-group has-success">
                                <label class="control-label">Начало обучения</label>
                                <input class="form-control" id="edu_start_{{ forloop.counter0 }}" placeholder="Начало обучения" title="" readonly type="text">
                              </div>
                              <div class="form-group has-success">
                                <label class="control-label">Окончание обучения</label>
                                <input class="form-control" id="edu_end_{{ forloop.counter0 }}" placeholder="Окончание обучения" title="" readonly type="text">
                              </div>
                                {% bootstrap_form form %}
                                <hr />
                            </fieldset>
                          {% else %}
                            <div class="form-group has-success">
                              <label class="control-label">Начало обучения</label>
                              <input class="form-control" id="edu_start_{{ forloop.counter0 }}" placeholder="Начало обучения" title="" readonly type="text">
                            </div>
                            <div class="form-group has-success">
                              <label class="control-label">Окончание обучения</label>
                              <input class="form-control" id="edu_end_{{ forloop.counter0 }}" placeholder="Окончание обучения" title="" readonly type="text">
                            </div>
                            {% bootstrap_form form %}
                            <hr />
                          {% endif %}
                        {% endfor %}
                    </div>
                    <input id="add_education" type="button" class="btn btn-info" value="Добавить еще учебное заведение" />
                  </div>
                </div>



                <div class="panel panel-primary">
                  <div class="panel-heading">Опыт работы</div>
                  <div class="panel-body">
                    <div class="alert alert-warning">
                      Опишите все предыдущие места работы, начиная с последнего или нынешнего места работы
                    </div>
                    <div id="exp_div">
                      {{ exp_formset.management_form }}
                        {% for form in exp_formset %}
                          {% if forloop.first %}
                            <fieldset id="exp_block">
                              <div class="form-group has-success">
                                <label class="control-label">Период работы с</label>
                                <input class="form-control" id="exp_start_{{ forloop.counter0 }}" placeholder="Период работы с" title="" readonly type="text">
                              </div>
                              <div class="form-group has-success">
                                <label class="control-label">Период работы по</label>
                                <input class="form-control" id="exp_end_{{ forloop.counter0 }}" placeholder="Период работы по" title="" readonly type="text">
                              </div>
                                {% bootstrap_form form %}
                                <hr />
                            </fieldset>
                          {% else %}
                            <div class="form-group has-success">
                              <label class="control-label">Период работы с</label>
                              <input class="form-control" id="exp_start_{{ forloop.counter0 }}" placeholder="Период работы с" title="" readonly type="text">
                            </div>
                            <div class="form-group has-success">
                              <label class="control-label">Период работы по</label>
                              <input class="form-control" id="exp_end_{{ forloop.counter0 }}" placeholder="Период работы по" title="" readonly type="text">
                            </div>
                            {% bootstrap_form form %}
                            <hr />
                          {% endif %}
                        {% endfor %}
                    </div>
                    <input id="add_exp" type="button" class="btn btn-info" value="Добавить еще место работы" />

                  </div>
                </div>



                <div class="panel panel-primary">
                  <div class="panel-heading">Дополнительные сведения</div>
                  <div class="panel-body">
                    {% bootstrap_field form.army %}
                    {% bootstrap_field form.army_id %}
                    {% bootstrap_field form.driver_lic %}
                    {% bootstrap_field form.car %}

                    {% bootstrap_field form.advantage %}
                    {% bootstrap_field form.disadvantage %}
                    {% bootstrap_field form.convicted %}
                    {% bootstrap_field form.illness %}
                    {% bootstrap_field form.salary %}

                  </div>
                </div>




                <div class="panel panel-primary">
                  <div class="panel-heading">Рекомендатели</div>
                  <div class="panel-body">
                    <div class="alert alert-warning">
                      Укажите 2-х человек, которые могли бы Вас рекомендовать
                    </div>
                    <label class="control-label">1 рекомендатель</label>
                    {% bootstrap_field form.ref1_full_name %}
                    {% bootstrap_field form.ref1_position %}
                    {% bootstrap_field form.ref1_workplace %}
                    {% bootstrap_field form.ref1_phone %}
                    <hr />
                    <label class="control-label">2 рекомендатель</label>
                    {% bootstrap_field form.ref2_full_name %}
                    {% bootstrap_field form.ref2_position %}
                    {% bootstrap_field form.ref2_workplace %}
                    {% bootstrap_field form.ref2_phone %}

                  </div>
                </div>



                <div class="panel panel-primary">
                  <div class="panel-heading">Прочее</div>
                  <div class="panel-body">
                    {% bootstrap_field form.source_about_as %}
                    {% bootstrap_field form.add_details %}
                    {% bootstrap_field form.start %}


                  </div>
                </div>




                <div class="alert alert-info">
                  Я понимаю, что любое неправильное предоставление информации,
                      либо неточности в данной анкете, могут привести к отказу в приеме на работу.
                      Я несу полную ответственность за достоверность всей информации, указанной в анкете,
                      и понимаю, что недостоверность информации может стать причиной моего дальнейшего увольнения
                    <div class="form-group">
                      <label><input type="checkbox" required /> Да</label>
                    </div>
                </div>



                <input type="submit" class="btn btn-success" id="sub_button" value="Отправить"/>
    </form>
</div>





</body>
</html>
